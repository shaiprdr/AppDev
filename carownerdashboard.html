<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>User Dashboard</title>
  <link rel="stylesheet" href="carownerdashboard.css" />
</head>
<body>
  <div id="carUploadModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h2>Upload a Car</h2>
      <form id="carUploadForm" enctype="multipart/form-data">
        <label for="carName">Car Name:</label>
        <input type="text" id="carName" name="carName" required>

        <label for="carType">Type:</label>
        <select id="carType" name="carType" required>
          <option value="" disabled selected>Select type</option>
          <option value="Economy">Economy</option>
          <option value="Luxury">Luxury</option>
          <option value="SUVs">SUVs</option>
          <option value="Electric Vehicles">Electric Vehicles</option>
        </select>

        <label for="seats">Seats:</label>
        <input type="number" id="seats" name="seats" min="2" max="12" required>

        <label for="fuelType">Fuel Type:</label>
        <select id="fuelType" name="fuelType" required>
          <option value="" disabled selected>Select fuel type</option>
          <option value="Petrol">Petrol</option>
          <option value="Gasoline">Gasoline</option>
          <option value="Xtra Advance">Xtra Advance</option>
          <option value="Battery (Electric)">Battery (Electric)</option>
        </select>

        <label for="pricePerDay">Price Per Day (₱):</label>
        <input type="number" id="pricePerDay" name="pricePerDay" required>

        <label for="location">Location:</label>
        <select id="location" name="location" required>
          <option value="" disabled selected>Select location</option>
          <option value="Metro Manila">Metro Manila</option>
          <option value="South Luzon">South Luzon</option>
          <option value="North Luzon">North Luzon</option>
          <option value="Visayas">Visayas</option>
          <option value="Mindanao">Mindanao</option>
          <option value="CALABARZON">CALABARZON</option>
        </select>

        <form id="car-form" novalidate>
          <div class="form-group">
            <label>Availability:</label>
            <div class="checkbox-row">
              <label><input type="checkbox" name="carAvailability" value="1 week">1 week</label>
              <label><input type="checkbox" name="carAvailability" value="2 weeks">2 weeks</label>
              <label><input type="checkbox" name="carAvailability" value="3 weeks">3 weeks</label>
              <label><input type="checkbox" name="carAvailability" value="1 month">1 month</label>
            </div>
            <p id="availability-error" style="color: red; margin-top: 5px;"></p>
          </div>

          <label for="carImage">Upload Car Image:</label>
          <input type="file" id="carImage" name="carImage" accept="image/*">
          <p id="image-error" style="color: red; margin-top: 5px;"></p>

          <button type="submit">Upload Car</button>
        </form>
    </div>
  </div>



  <aside class="sidebar">
    <div class="logo">
      <img src="IMAGES/logo.png" alt="Logo" />
      <span class="logo-text">Car Owner Dashboard</span>
    </div>
    <nav>
      <a href="userdashboard.html" class="active">Proile</a>
      <a href="#">Preferences</a>
      <a href="#" id="inboxToggleBtn">Inbox</a>
    </nav>
  </aside>


  <main class="main-content">

   
    <header class="header">
      <h2>Welcome back, Julia!</h2>
      <div class="nav-buttons">
        <button class="book-now-btn" id="uploadCarBtn">Upload Car</button>
      </div>
    </header>

   
    <section class="dashboard">

      
      <div class="card profile-card" id="profile-card">
        <div class="profile">
          <img src="IMAGES/profile.jpg" alt="Owner" />
          <div class="profile-details">
            <strong>Car Owner</strong>
            <p>@car.o</p>
          </div>
        </div>
        <div class="profile-contact">
          <p class="label">Contact</p>
          <p class="text">carowner@example.com<br/>967 445 4894</p>
        </div>
        <div class="button-group">
          <button class="edit-btn">Edit Profile</button>
        </div>
      </div>

      <div class="card-government-card">
        <p class="label">Government & Contact Details</p>
        <div class="goverment-details"></div>
        <p><strong>Government ID Type:</strong></p>
        <p><strong>Government ID Number:</strong></span></p>
        <p><strong>Address:</strong></p>
        <p><strong>Contact Number:</strong></p>
        <p><strong>Driver License ID:</strong></p>
        </div>
        
        <div id="preferencesModal" class="modal">
          <div class="modal-content">
          <div class="modal-header">
          <h3>User Preferences</h3>
        <span class="close-modal">&times;</span>
        </div>
        <div class="modal-body">
        <div class="preference-option">
        <span>Dark Mode</span>
        <label class="toggle-switch">
          <input type="checkbox" id="darkModeToggle">
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="preference-option">
        <span>Font Size</span>
        <select id="fontSizeSelector">
          <option value="small">Small</option>
          <option value="medium" selected>Medium</option>
          <option value="large">Large</option>
        </select>
      </div>
    </div>
        <div class="modal-footer">
      <button id="savePreferences" class="btn">Save Preferences</button>
    </div>
  </div>
</div>

<div id="inboxModal" class="modal">
  <div class="modal-content inbox-content">
    <div class="modal-header">
      <h3>Inbox</h3>
      <span class="close-inbox">&times;</span>
    </div>
    <div class="modal-body">
      <div class="tabs">
        <button class="tab-button active" data-tab="renters">Car Renters</button>
        <button class="tab-button" data-tab="support">Customer Support</button>
      </div>
      <div class="tab-content active" id="renters">
        <p>No messages yet from car renters.</p>
      </div>
      <div class="tab-content" id="support">
        <p>No messages yet from customer support.</p>
      </div>
    </div>
  </div>
</div>

      
      <div class="card booking-status">
        <p class="label">Booking Status</p>
        <div class="status-entry">
          <strong class="status-ongoing">Accepted</strong>
          <p>0 accepted bookings</p>
        </div>
        <div class="status-entry">
          <strong class="status-completed">Rejected</strong>
          <p>0 rejected bookings</p>
        </div>
        <div class="status-entry">
          <strong class="status-upcoming">Upcoming</strong>
          <p>0 upcoming bookings</p>
          <a href="#" class="view-link">View</a>
        </div>
      </div>

    
      <div class="card payment-history">
        <p class="label">Payouts</p>
        <div class="stats">
          <div class="stat-box">
            <h4>Payment Received</h4>
            <p>0</p>
          </div>
          <div class="stat-box">
            <h4>Pending Payment</h4>
            <p>0</p>
          </div>
          <div class="stat-box">
            <h4>Total Payout</h4>
            <p>0</p>
          </div>
        </div>
      </div>

    
    <div class="card billing-methods">
      <p class="label">Payout Method</p>
      <ul class="payout-method-list">
      <li class="payout-method">
        <div class="method-details">
          <div class="method-info">
            <img src="IMAGES/credit-card.png" alt="Card" />
            <span>Card</span>
          </div>
          <p class="saved-number" id="card-number"></p>
        </div>
        <a href="#" class="edit-link">Add</a>
      </li>

      <li class="payout-method">
        <div class="method-details">
          <div class="method-info">
            <img src="IMAGES/gcash.png" alt="GCash" />
            <span>GCash</span>
          </div>
          <p class="saved-number" id="gcash-number"></p>
        </div>
        <a href="#" class="edit-link">Add</a>
      </li>

      <li class="payout-method">
        <div class="method-details">
          <div class="method-info">
            <img src="IMAGES/paypal.png" alt="PayPal" />
            <span>PayPal</span>
          </div>
          <p class="saved-number" id="paypal-number"></p>
        </div>
        <a href="#" class="edit-link">Add</a>
      </li>

      <li class="payout-method">
        <div class="method-details">
          <div class="method-info">
            <img src="IMAGES/maya.png" alt="Maya" />
            <span>Maya</span>
          </div>
          <p class="saved-number" id="maya-number"></p>
        </div>
        <a href="#" class="edit-link">Add</a>
      </li>
    </ul>
    </div>


    <div class="card uploaded-vehicles">
      <p class="label">Uploded  Vehicles</p>
      <p>-----</p>
    </div>
    </section> 

    <div id="carDetailsModal" class="modal" style="display:none;">
      <div class="modal-content">
        <span class="close" id="closeCarDetails">&times;</span>
        <h2 id="detailName"></h2>
        <img id="detailImage" src="" alt="" style="width:300px;">
        <p><strong>Type:</strong> <span id="detailType"></span></p>
        <p><strong>Seats:</strong> <span id="detailSeats"></span></p>
        <p><strong>Fuel Type:</strong> <span id="detailFuel"></span></p>
        <p><strong>Price per day:</strong> ₱<span id="detailPrice"></span></p>
        <p><strong>Location:</strong> <span id="detailLocation"></span></p>
        <p><strong>Availability:</strong> <span id="detailAvailability"></span></p>
      </div>
    </div>

  </main>

<script>
  document.getElementById("car-form").addEventListener("submit", function (event) {
    event.preventDefault();

    const checkboxes = document.querySelectorAll('input[name="carAvailability"]');
    const imageInput = document.getElementById("carImage");

    const availabilityError = document.getElementById("availability-error");
    const imageError = document.getElementById("image-error");

    let isValid = true;

    if (!Array.from(checkboxes).some(cb => cb.checked)) {
      availabilityError.textContent = "Please select at least one availability option.";
      isValid = false;
    } else {
      availabilityError.textContent = "";
    }

    if (!imageInput.files || imageInput.files.length === 0) {
      imageError.textContent = "Please upload a car image.";
      isValid = false;
    } else {
      imageError.textContent = "";
    }
    
    if (isValid) {
      this.submit();
    }
  });
</script>


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const uploadCarBtn = document.getElementById("uploadCarBtn");
    const uploadModal = document.getElementById("carUploadModal");
    const closeModalBtn = document.querySelector(".close");
    const uploadForm = document.getElementById("carUploadForm");
    const vehicleContainer = document.querySelector(".uploaded-vehicles");

    uploadCarBtn.addEventListener("click", () => {
      uploadModal.style.display = "block";
    });

    closeModalBtn.addEventListener("click", () => {
      uploadModal.style.display = "none";
    });

    uploadForm.addEventListener("submit", function (e) {
      e.preventDefault();

      const imageInput = document.getElementById("carImage");
      const file = imageInput.files[0];
      if (!file) {
        alert("Please upload a car image.");
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        const imageDataUrl = e.target.result;

        const newCar = {
          name: document.getElementById("carName").value,
          type: document.getElementById("carType").value,
          seats: document.getElementById("seats").value,
          fuel: document.getElementById("fuelType").value,
          price: document.getElementById("pricePerDay").value,
          location: document.getElementById("location").value,
          availability: Array.from(document.querySelectorAll('input[name="carAvailability"]:checked')).map(cb => cb.value),
          image: imageDataUrl
        };

        let vehicleData = JSON.parse(localStorage.getItem("uploadedVehicles")) || [];
        vehicleData.push(newCar);
        localStorage.setItem("uploadedVehicles", JSON.stringify(vehicleData));
        updateUploadedVehicles(vehicleData);
        uploadModal.style.display = "none";
        uploadForm.reset();
      };

      reader.readAsDataURL(file);
    });

    window.updateUploadedVehicles = function (vehicles) {
      const container = document.querySelector(".uploaded-vehicles");
      const carGallery = vehicles.map((car, index) => `
        <div class="car-image-wrapper">
          <img src="${car.image}" alt="${car.name}" class="car-thumbnail" data-index="${index}" style="cursor:pointer;"/>
        </div>
      `).join("");

      container.innerHTML = `<p class="label">Uploaded Vehicles</p><div class="car-gallery">${carGallery}</div>`;

      document.querySelectorAll(".car-thumbnail").forEach(img => {
        img.addEventListener("click", (e) => {
          const idx = e.target.dataset.index;
          showCarDetails(vehicles[idx]);
        });
      });
    };
  });
</script>

<script>
  function showCarDetails(car) {
    document.getElementById("detailName").textContent = car.name;
    document.getElementById("detailImage").src = car.image;
    document.getElementById("detailType").textContent = car.type;
    document.getElementById("detailSeats").textContent = car.seats;
    document.getElementById("detailFuel").textContent = car.fuel;
    document.getElementById("detailPrice").textContent = car.price;
    document.getElementById("detailLocation").textContent = car.location;
    document.getElementById("detailAvailability").textContent = car.availability.join(", ");

    document.getElementById("carDetailsModal").style.display = "block";
  }

  document.getElementById("closeCarDetails").addEventListener("click", () => {
    document.getElementById("carDetailsModal").style.display = "none";
  });

  window.addEventListener("click", (event) => {
    const modal = document.getElementById("carDetailsModal");
    if (event.target === modal) {
      modal.style.display = "none";
    }
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  const userData = JSON.parse(localStorage.getItem('userProfile')) || {};
  const statusData = JSON.parse(localStorage.getItem('bookingStatus')) || {};
  const paymentData = JSON.parse(localStorage.getItem('paymentHistory')) || {};
  const payoutData = JSON.parse(localStorage.getItem('payoutMethod')) || {};
  const vehicleData = JSON.parse(localStorage.getItem('uploadedVehicles')) || [];

  updateWelcomeMessage(userData);
  updateProfileCard(userData);
  updateGovernmentCard(userData);
  updateBookingStatus(statusData);
  updatePaymentHistory(paymentData);
  updatePayoutMethod(payoutData);
  updateUploadedVehicles(vehicleData);

  setupEditProfileButton(userData);
});

  document.addEventListener("DOMContentLoaded", () => {

  const userData = JSON.parse(localStorage.getItem('userProfile')) || {};
  
 
  updateWelcomeMessage(userData);
  updateProfileCard(userData);
  updateGovernmentCard(userData);
  setupEditProfileButton(userData);
});

function updateWelcomeMessage(userData) {
  const welcomeHeader = document.querySelector('.header h2');
  if (welcomeHeader) {
    const firstName = userData.firstName || 'Julia';
    welcomeHeader.textContent = `Welcome back, ${firstName}!`;
  }
}

function updateProfileCard(userData) {
  const profileName = document.querySelector('.profile-details strong');
  const profileUsername = document.querySelector('.profile-details p');
  const profileContact = document.querySelector('.profile-contact .text');
  
  if (profileName && profileUsername && profileContact) {
    const fullName = `${userData.firstName || 'Julia'} ${userData.middleName ? userData.middleName + ' ' : ''}${userData.lastName || 'Banks'} ${userData.suffix || ''}`.trim();
    
    const firstName = userData.firstName || 'julia';
    const lastInitial = userData.lastName ? userData.lastName.charAt(0) : 'b';
    const username = `@${firstName.toLowerCase()}.${lastInitial.toLowerCase()}`;
    
    const email = userData.email || 'julia@example.com';
    const contactNumber = userData.contactNumber || '+63 967 445 4894';
    
    profileName.textContent = fullName;
    profileUsername.textContent = username;
    profileContact.innerHTML = `
      <div class="email">${email}</div>
      <div class="contact-number">${contactNumber}</div>
    `;
  }
}

function updateGovernmentCard(userData) {
  const govDetailsCard = document.querySelector('.card-government-card');
  if (!govDetailsCard) return;
  
  const paragraphs = govDetailsCard.querySelectorAll('p');
  if (paragraphs.length >= 6) {
    
    const contactNumber = userData.contactNumber || '+63 967 445 4894';
    
    paragraphs[1].innerHTML = `<strong>Government ID Type:</strong> ${userData.govIdType || 'Not provided'}`;
    paragraphs[2].innerHTML = `<strong>Government ID Number:</strong> ${userData.govIdNumber || 'Not provided'}`;
    paragraphs[3].innerHTML = `<strong>Contact Number:</strong> ${contactNumber}`;
    paragraphs[4].innerHTML = `<strong>Address:</strong> ${userData.address || 'Not provided'}`;
    paragraphs[5].innerHTML = `<strong>Driver License ID:</strong> ${userData.driverLicense || 'Not provided'}`;
  }
}

function setupEditProfileButton(userData) {
  const editBtn = document.querySelector('.edit-btn');
  if (!editBtn) return;
  
  editBtn.addEventListener('click', () => {
    if (editBtn.textContent === 'Edit Profile') {
      
      const profileName = document.querySelector('.profile-details strong');
      const profileUsername = document.querySelector('.profile-details p');
      const profileContact = document.querySelector('.profile-contact .text');
      
      const fullName = profileName.textContent;
      const username = profileUsername.textContent;
      
      profileName.innerHTML = `<input type="text" id="editFullName" value="${fullName}" />`;
      profileUsername.innerHTML = `<input type="text" id="editUsername" value="${username}" />`;
      profileContact.innerHTML = `
        <input type="email" id="editEmail" value="${userData.email || ''}" placeholder="Email" />
        <input type="text" id="editContactNumber" value="${userData.contactNumber || ''}" placeholder="Contact Number" />
      `;
      
      editBtn.textContent = 'Save Profile';
    } else {
    
      const profileName = document.querySelector('.profile-details strong');
      const profileUsername = document.querySelector('.profile-details p');
      const profileContact = document.querySelector('.profile-contact .text');
      
      const updatedFullName = document.getElementById('editFullName').value;
      const updatedUsername = document.getElementById('editUsername').value;
      const updatedEmail = document.getElementById('editEmail').value;
      const updatedContactNumber = document.getElementById('editContactNumber').value;
      
     
      profileName.textContent = updatedFullName;
      profileUsername.textContent = updatedUsername;
      profileContact.innerHTML = `
        <div class="email">${updatedEmail}</div>
        <div class="contact-number">${updatedContactNumber}</div>
      `;
      
      
      const updatedUserData = JSON.parse(localStorage.getItem('userProfile')) || {};
      
      
      const nameParts = updatedFullName.trim().split(' ');
      if (nameParts.length >= 2) {
        updatedUserData.firstName = nameParts[0];
        updatedUserData.lastName = nameParts[nameParts.length - 1];
        
      
        if (nameParts.length > 2) {
          updatedUserData.middleName = nameParts.slice(1, -1).join(' ');
        }
      }
      
     
      updatedUserData.email = updatedEmail;
      updatedUserData.contactNumber = updatedContactNumber;
      
      
      localStorage.setItem('userProfile', JSON.stringify(updatedUserData));
      
      
      editBtn.textContent = 'Edit Profile';
      
      
      updateWelcomeMessage(updatedUserData);
      updateGovernmentCard(updatedUserData);
    }
  });
}
</script>

<script>
  
document.addEventListener("DOMContentLoaded", () => {
  
  const preferencesModal = document.getElementById("preferencesModal");
  const preferencesLink = document.querySelector('a[href="#"]');
  const closeModal = document.querySelector(".close-modal");
  const darkModeToggle = document.getElementById("darkModeToggle");
  const fontSizeSelector = document.getElementById("fontSizeSelector");
  const savePreferencesBtn = document.getElementById("savePreferences");
  
  
  loadPreferences();
  
 
  preferencesLink.addEventListener("click", (e) => {
    e.preventDefault();
    preferencesModal.style.display = "block";
  });
  
 
  closeModal.addEventListener("click", () => {
    preferencesModal.style.display = "none";
  });
  
  
  window.addEventListener("click", (event) => {
    if (event.target === preferencesModal) {
      preferencesModal.style.display = "none";
    }
  });
  
  
  savePreferencesBtn.addEventListener("click", () => {
    savePreferences();
    preferencesModal.style.display = "none";
  });
  
  
  darkModeToggle.addEventListener("change", () => {
    toggleDarkMode(darkModeToggle.checked);
  });
  
 
  fontSizeSelector.addEventListener("change", () => {
    changeFontSize(fontSizeSelector.value);
  });
  
  
  function loadPreferences() {
    const preferences = JSON.parse(localStorage.getItem("userPreferences")) || {};
    
    
    if (preferences.darkMode !== undefined) {
      darkModeToggle.checked = preferences.darkMode;
      toggleDarkMode(preferences.darkMode);
    }
    
    
    if (preferences.fontSize) {
      fontSizeSelector.value = preferences.fontSize;
      changeFontSize(preferences.fontSize);
    }
  }
  
 
  function savePreferences() {
    const preferences = {
      darkMode: darkModeToggle.checked,
      fontSize: fontSizeSelector.value
    };
    
    localStorage.setItem("userPreferences", JSON.stringify(preferences));
    
  
    toggleDarkMode(preferences.darkMode);
    changeFontSize(preferences.fontSize);
  }
  
 
  function toggleDarkMode(isDarkMode) {
    if (isDarkMode) {
      document.body.classList.add("dark-mode");
    } else {
      document.body.classList.remove("dark-mode");
    }
  }
  
 
  function changeFontSize(size) {
    const htmlElement = document.documentElement;
    
    switch(size) {
      case "small":
        htmlElement.style.fontSize = "14px";
        break;
      case "medium":
        htmlElement.style.fontSize = "16px";
        break;
      case "large":
        htmlElement.style.fontSize = "18px";
        break;
      default:
        htmlElement.style.fontSize = "16px";
    }
  }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const inboxToggleBtn = document.getElementById('inboxToggleBtn');
  const inboxModal = document.getElementById('inboxModal');
  const closeInboxBtn = document.querySelector('.close-inbox');

  if (inboxToggleBtn && inboxModal && closeInboxBtn) {
    inboxToggleBtn.addEventListener('click', (e) => {
      e.preventDefault();
      inboxModal.style.display = 'block';
    });

    closeInboxBtn.addEventListener('click', () => {
      inboxModal.style.display = 'none';
    });

    window.addEventListener('click', (e) => {
      if (e.target === inboxModal) {
        inboxModal.style.display = 'none';
      }
    });
  }

  
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabContents = document.querySelectorAll('.tab-content');

  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      
      tabButtons.forEach(btn => btn.classList.remove('active'));
      tabContents.forEach(content => content.classList.remove('active'));
  
      button.classList.add('active');
      const tabId = button.getAttribute('data-tab');
      document.getElementById(tabId).classList.add('active');
    });
  });
});
</script>

<script>
  function updateBookingStatus(statusData) {
  const statusEntries = document.querySelectorAll('.booking-status .status-entry');
  if (statusEntries.length >= 3) {
    statusEntries[0].querySelector('p').textContent = `${statusData.accepted || 0} accepted bookings`;
    statusEntries[1].querySelector('p').textContent = `${statusData.rejected || 0} rejected bookings`;
    statusEntries[2].querySelector('p').textContent = `${statusData.upcoming || 0} upcoming bookings`;
  }
}

function updatePaymentHistory(paymentData) {
  const statBoxes = document.querySelectorAll('.payment-history .stat-box');
  if (statBoxes.length >= 3) {
    statBoxes[0].querySelector('p').textContent = paymentData.received || '0';
    statBoxes[1].querySelector('p').textContent = paymentData.pending || '0';
    statBoxes[2].querySelector('p').textContent = paymentData.total || '0';
  }
}

function updatePayoutMethod(payoutData) {
  const cardNumberEl = document.getElementById('card-number');
  if (cardNumberEl) {
    cardNumberEl.textContent = payoutData.cardNumber ? `**** **** **** ${payoutData.cardNumber.slice(-4)}` : 'No card saved';
  }
}

function updateUploadedVehicles(vehicleData) {
  const uploadedSection = document.querySelector('.uploaded-vehicles p:nth-of-type(2)');
  if (uploadedSection) {
    uploadedSection.textContent = vehicleData.length ? vehicleData.join(', ') : 'No vehicles uploaded';
  }
}

</script>
</body>
</html>
