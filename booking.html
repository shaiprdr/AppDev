<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Booking Page - RREENNTTACAR</title>
  <link rel="stylesheet" href="booking.css" />
</head>
<body>
  <header>
    <div class="navbar">
      <div class="brand">
        <img src="IMAGES/logo.png" alt="Logo" class="logo-img" />
        <span class="logo-text">RREENNTTACAR</span>
      </div>
      <nav>
        <ul class="nav-links">
          <li><a href="landingpage.html"><img src="IMAGES/home.png" alt="home" class="nav-icon"></a></li>
          <li><a href="userdashboard.html"><img src="IMAGES/people.png" alt="profile" class="nav-icon"></a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="booking-hero">
    <video autoplay muted loop class="booking-hero-video">
      <source src="IMAGES/7154212-hd_1920_1080_25fps.mp4" type="video/mp4" />
    </video>
    <div class="video-overlay"></div>
    <div class="booking-hero-overlay">
      <h1>Find Your Perfect Ride</h1>
      <p>Quick and easy booking</p>
    </div>

    <div class="booking-bar-overlay">
      <div class="booking-bar">
        <div class="booking-grid">
          <div class="input-group">
            <input type="date" id="rental-start" name="rental-start-date" required>
            <label for="rental-start">Rental Start Date</label>
          </div>
          <div class="input-group">
            <input type="date" id="rental-end" name="rental-end-date" required>
            <label for="rental-end">Rental End Date</label>
          </div>
          <div class="input-group">
            <input type="text" id="rental-duration-display" name="rental-duration"  placeholder="7 - 31 days only">
            <label for="rental-duration-display">Rental Duration (days)</label>
          </div>
          <div class="input-group">
            <select id="return-area" required>
              <option value="" disabled selected hidden>----</option>
              <option>Caloocan City Branch</option>
              <option>Las Pinas City Branch</option>
              <option>Makati City Branch</option>
              <option>Malabon City Branch</option>
                  <option>Mandaluyong City Branch</option>
                  <option>Marikina City Branch</option>
                  <option>Manila City Branch</option>
                  <option>Muntinlupa City Branch</option>
                  <option>Navotas City Branch</option>
                  <option>Paranaque City Branch</option>
                  <option>Pasay City Branch</option>
                  <option>Pasig City Branch</option>
                  <option>Quezon City Branch</option>
                  <option>San Juan City Branch</option>
                  <option>Taguig City Branch</option>
                  <option>Valenzuela City Branch</option>
                  <option>Municipality of Pateros Branch</option>
                  <option>Cavite Branch</option>
                  <option>Laguna Branch</option>
                  <option>Batangas Branch</option>
                  <option>Rizal Branch</option>
                  <option>Quezon Province Branch</option>
            </select>
            <label for="return-area">From what branch</label>
          </div>
          <div class="input-group delivery-address">
              <input type="text" id="delivery-address" name="delivery-address" placeholder="Your delivery address" required>
              <label for="delivery-address">Car Delivery Address</label>
            </div>

            
            <div class="input-group">
              <input type="date" id="delivery-date" name="delivery-date" required />
              <label for="delivery-date">Delivery Date</label>
            </div>

           
            <div class="input-group">
              <input type="time" id="delivery-time" name="delivery-time" required />
              <label for="delivery-time">Delivery Time</label>
            </div>
         
<div class="input-group return-method-wrapper">
  <div class="return-method-input">
    <label for="return-method">Return Method</label>
      <select id="return-method" required>
              <option value="" disabled selected hidden>----</option>
              <option value="return-area">Return to Branch</option>
              <option value="delivery-address">Pick up at same address</option>
              <option value="return-address">Pick up at different location</option>
      </select>
  </div>
</div>


<div class="input-group return-address" style="display: none;">
  <label for="return-address">Return Address</label>
  <input type="text" id="return-address" name="return-address" placeholder="Enter return address" />
</div>


<div class="input-group">
  <input type="date" id="return-date" name="return-date" required />
  <label for="return-date">Return Date</label>
</div>


<div class="input-group">
  <input type="time" id="return-time" name="return-time" required />
  <label for="return-time">Return Time</label>
</div>
          <div class="input-group">
            <button type="button" onclick="saveBookingDetails()" id="save-button" class="save-btn">Save</button>
          </div>
        </div>
      </div>
    </div>
  </section>

<section class="booking-sum-container">
  <div class="booking-summary-container">
    <div class="summary-flex-container">

     
      <div class="car-slider">
        <img src="IMAGES/jeep.png" alt="Car Image 1" class="slider-image active">
        <img src="IMAGES/bmw-5-series.jpg" alt="Car Image 2" class="slider-image">
        <img src="IMAGES/ford-everest.jpg" alt="Car Image 3" class="slider-image">
        <button class="prev" onclick="prevSlide()">❮</button>
        <button class="next" onclick="nextSlide()">❯</button>
      </div>

      <div id="booking-summary">
        <h2>Booking Summary</h2>
        <p><strong>Car Model:</strong> <span id="summary-carModel"></span></p>
        <p><strong>Rental Duration:</strong> <span id="summary-rentalDuration"></span></p>
        <p><strong>Branch:</strong> <span id="summary-branch"></span></p>
        <p><strong>Delivery Location:</strong> <span id="summary-delivery"></span></p>
        <p><strong>Return Location:</strong> <span id="summary-return"></span></p>
        <p><strong>Start Date:</strong> <span id="summary-startDate"></span></p>
        <p><strong>End Date:</strong> <span id="summary-endDate"></span></p>

        <div class="acknowledgment-section">
  <label><input type="checkbox" id="agree-terms"> I have read and agreed to the rental terms and privacy policy.</label><br>
  <label><input type="checkbox" id="agree-contact"> I understand the car owner will contact me for further coordination.</label>
</div>
        <div class="booking-actions">
          <a href="payment.html" class="pay-now-button" id="pay-now-button" onclick="return validateAgreement()">PAY NOW</a>
          <p class="note">After payment, the car owner will contact you to confirm the rental and finalize pickup details.</p>
        </div>
      </div>

    </div>
  </div>
</section>

  <footer>
    <p>&copy; 2025 RREENNTTACAR. All rights reserved.</p>
  </footer>

  <script>
document.addEventListener("DOMContentLoaded", function () {
  const returnMethodSelect = document.getElementById("return-method");
  const returnAreaSelect = document.getElementById("return-area");
  const deliveryAddress = document.getElementById("delivery-address");
  const returnAddressGroup = document.querySelector(".return-address");
  const returnAddressInput = document.getElementById("return-address");
  const debugDisplay = document.getElementById("debug-display"); 

  returnMethodSelect.addEventListener("change", function () {
    const selectedValue = this.value;

    if (selectedValue === "return-area") {
      returnAddressGroup.style.display = "none";
      returnAddressInput.value = returnAreaSelect.value;
      console.log("Return address set to branch:", returnAddressInput.value);
      debugDisplay.textContent = "Return Address: " + returnAddressInput.value;

    } else if (selectedValue === "delivery-address") {
      returnAddressGroup.style.display = "none";
      returnAddressInput.value = deliveryAddress.value;
      console.log("Return address set to delivery address:", returnAddressInput.value);
      debugDisplay.textContent = "Return Address: " + returnAddressInput.value;

    } else if (selectedValue === "return-address") {
      returnAddressGroup.style.display = "block";
      returnAddressInput.value = "";
      console.log("Return address field is now editable.");
      debugDisplay.textContent = "Please enter a return address.";
    }
  });

  returnAreaSelect.addEventListener("change", () => {
    if (returnMethodSelect.value === "return-area") {
      returnAddressInput.value = returnAreaSelect.value;
      debugDisplay.textContent = "Return Address: " + returnAddressInput.value;
    }
  });

  deliveryAddress.addEventListener("input", () => {
    if (returnMethodSelect.value === "delivery-address") {
      returnAddressInput.value = deliveryAddress.value;
      debugDisplay.textContent = "Return Address: " + returnAddressInput.value;
    }
  });
});
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {

  const saveBtn = document.getElementById("save-button");


  const fields = [
    "rental-start",
    "rental-end",
    "rental-duration-display",
    "return-area",
    "delivery-address",
    "delivery-date",
    "delivery-time",
    "return-method",
    "return-address",
    "return-date",
    "return-time"
  ];


  function saveFormData() {
    fields.forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        localStorage.setItem(id, el.value);
      }
    });
    alert("Booking information saved!");
  }

 
  function loadFormData() {
    fields.forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        const savedValue = localStorage.getItem(id);
        if (savedValue) {
          el.value = savedValue;
         
          if (el.tagName.toLowerCase() === "select") {
            el.dispatchEvent(new Event("change"));
          }
        }
      }
    });
  }

  
  saveBtn.addEventListener("click", saveFormData);

  
  loadFormData();

 
  const returnMethodSelect = document.getElementById("return-method");
  const returnAreaSelect = document.getElementById("return-area");
  const deliveryAddress = document.getElementById("delivery-address");
  const returnAddressGroup = document.querySelector(".return-address");
  const returnAddressInput = document.getElementById("return-address");

  returnMethodSelect.addEventListener("change", function () {
    const selectedValue = this.value;

    if (selectedValue === "return-area") {
      returnAddressGroup.style.display = "none";
      returnAddressInput.value = returnAreaSelect.value;
    } else if (selectedValue === "delivery-address") {
      returnAddressGroup.style.display = "none";
      returnAddressInput.value = deliveryAddress.value;
    } else if (selectedValue === "return-address") {
      returnAddressGroup.style.display = "block";
      returnAddressInput.value = "";
    }
  });

  returnAreaSelect.addEventListener("change", () => {
    if (returnMethodSelect.value === "return-area") {
      returnAddressInput.value = returnAreaSelect.value;
    }
  });

  deliveryAddress.addEventListener("input", () => {
    if (returnMethodSelect.value === "delivery-address") {
      returnAddressInput.value = deliveryAddress.value;
    }
  });
});

</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
  const rentalStartInput = document.getElementById("rental-start");
  const rentalEndInput = document.getElementById("rental-end");
  const rentalDurationDisplay = document.getElementById("rental-duration-display");
  const deliveryDateInput = document.getElementById("delivery-date");
  const returnDateInput = document.getElementById("return-date");

  function updateRentalDetails() {
    const startDate = new Date(rentalStartInput.value);
    const endDate = new Date(rentalEndInput.value);

    if (rentalStartInput.value && rentalEndInput.value) {
      const durationInDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;

      if (durationInDays < 7 || durationInDays > 31) {
        alert("❌ Invalid rental duration.\n\nOur car rentals are only available for:\n• 1 week (7 days)\n• 2 weeks (14 days)\n• 3 weeks (21 days)\n• 1 month (31 days)\n\nPlease select a valid duration.");
        rentalStartInput.value = "";
        rentalEndInput.value = "";
        rentalDurationDisplay.value = "";
        deliveryDateInput.value = "";
        returnDateInput.value = "";
        return;
      }

      rentalDurationDisplay.value = `${durationInDays} days`;

     
      const deliveryDate = new Date(startDate);
      deliveryDate.setDate(deliveryDate.getDate() - 1);
      deliveryDateInput.value = deliveryDate.toISOString().split("T")[0];

    
      const returnDate = new Date(endDate);
      returnDate.setDate(returnDate.getDate() + 1);
      returnDateInput.value = returnDate.toISOString().split("T")[0];
    }
  }

  rentalStartInput.addEventListener("change", updateRentalDetails);
  rentalEndInput.addEventListener("change", updateRentalDetails);
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const modal = document.getElementById("rental-terms-modal");
  const modalContent = modal.querySelector(".modal-content");
  const closeBtn = document.querySelector(".close-button");

  
  function openModal() {
    modal.style.display = "block";
    
    
    modalContent.style.animation = "none";
    void modalContent.offsetWidth; 
    modalContent.style.animation = "slideUp 0.4s ease forwards";
  }

  
  function closeModal() {
    modal.style.display = "none";
  }

  
  openModal();

 
  closeBtn.addEventListener("click", closeModal);


  window.addEventListener("click", (event) => {
    if (event.target === modal) {
      closeModal();
    }
  });
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  
  const inputs = document.querySelectorAll('.booking-bar-overlay input, .booking-bar-overlay select');

  inputs.forEach(input => {
    if (input.tagName.toLowerCase() === 'select') {
      input.selectedIndex = 0; 
    } else if (input.type === 'checkbox' || input.type === 'radio') {
      input.checked = false;    
    } else {
      input.value = '';         
    }
  });
});
</script>


<div id="rental-terms-modal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <h2>Heads Up!</h2>
    <ul>
      <li><strong>Delivery Date:</strong> We deliver your booked car <b>one day before</b> your rental start date. (e.g., Booked for 15/05/2025 → Delivered on 14/05/2025)</li>
      <li><strong>Return Date:</strong> Please return the car <b>the day after</b> your rental end date. (e.g., Rental ends 31/05/2025 → Return on 01/06/2025)</li>
      <li><strong>Time:</strong> Delivery and return times are <b>flexible</b>. We're available <b>24/7</b> to serve you!</li>
    </ul>
    <p>For more information, <a href="terms-and-agreement.html" target="_blank">click here</a>.</p>
  </div>
</div>

<script>
  function saveBookingDetails() {
    const startDate = document.getElementById("rental-start").value;
    const endDate = document.getElementById("rental-end").value;
    const rentalDuration = document.getElementById("rental-duration-display").value;
    const branch = document.getElementById("return-area").value;
    const delivery = document.getElementById("delivery-address").value;
    const returnMethod = document.getElementById("return-method").value;
    const returnLocation = returnMethod === "return-address"
      ? document.getElementById("return-address").value
      : (returnMethod === "return-area"
          ? branch
          : delivery);

    
    const bookingInfo = {
      rentalDuration: rentalDuration,
      branch: branch,
      delivery: delivery,
      returnLocation: returnLocation,
      startDate: startDate,
      endDate: endDate
    };

   
    localStorage.setItem("bookingInfo", JSON.stringify(bookingInfo));

    
    document.getElementById("summary-rentalDuration").textContent = rentalDuration;
    document.getElementById("summary-branch").textContent = branch;
    document.getElementById("summary-delivery").textContent = delivery;
    document.getElementById("summary-return").textContent = returnLocation;
    document.getElementById("summary-startDate").textContent = startDate;
    document.getElementById("summary-endDate").textContent = endDate;
  }

 
  window.addEventListener("DOMContentLoaded", () => {
    const bookingInfo = JSON.parse(localStorage.getItem("bookingInfo"));
    if (bookingInfo) {
      document.getElementById("summary-rentalDuration").textContent = bookingInfo.rentalDuration;
      document.getElementById("summary-branch").textContent = bookingInfo.branch;
      document.getElementById("summary-delivery").textContent = bookingInfo.delivery;
      document.getElementById("summary-return").textContent = bookingInfo.returnLocation;
      document.getElementById("summary-startDate").textContent = bookingInfo.startDate;
      document.getElementById("summary-endDate").textContent = bookingInfo.endDate;
    }
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    let slideIndex = 0;
    const slides = document.querySelectorAll(".slider-image");

    function showSlide(index) {
      slides.forEach((slide, i) => {
        slide.classList.toggle("active", i === index);
      });
    }

    window.nextSlide = function () {
      slideIndex = (slideIndex + 1) % slides.length;
      showSlide(slideIndex);
    };

    window.prevSlide = function () {
      slideIndex = (slideIndex - 1 + slides.length) % slides.length;
      showSlide(slideIndex);
    };

   
    setInterval(() => {
      slideIndex = (slideIndex + 1) % slides.length;
      showSlide(slideIndex);
    }, 4000);

    
    showSlide(slideIndex);
  });
</script>
<script>
  window.onload = function () {
    const checkbox1 = document.getElementById('checkbox1');
    const checkbox2 = document.getElementById('checkbox2');
    const payNowButton = document.getElementById('pay-now-button');

  
    function clearBookingSummary() {
      document.getElementById('summary-carModel').textContent = '';
      document.getElementById('summary-rentalDuration').textContent = '';
      document.getElementById('summary-branch').textContent = '';
      document.getElementById('summary-delivery').textContent = '';
      document.getElementById('summary-return').textContent = '';
      document.getElementById('summary-startDate').textContent = '';
      document.getElementById('summary-endDate').textContent = '';
    }

    
    clearBookingSummary();

    
    function updateButtonState() {
      if (checkbox1.checked && checkbox2.checked) {
        payNowButton.classList.remove('disabled');
        payNowButton.style.pointerEvents = 'auto';
        payNowButton.style.opacity = '1';
      } else {
        payNowButton.classList.add('disabled');
        payNowButton.style.pointerEvents = 'none';
        payNowButton.style.opacity = '0.5';
      }
    }

    checkbox1.addEventListener('change', updateButtonState);
    checkbox2.addEventListener('change', updateButtonState);

    
    window.validateAgreement = function () {
      if (!(checkbox1.checked && checkbox2.checked)) {
        alert("Please check both agreement boxes before proceeding.");
        return false;
      }
    
      clearBookingSummary();
      return true;
    };

 
    updateButtonState();
  };
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
  const payNowButton = document.getElementById("pay-now-button");
  const checkbox1 = document.getElementById("agree-terms");
  const checkbox2 = document.getElementById("agree-contact");

  function updatePayNowButton() {
    if (checkbox1.checked && checkbox2.checked) {
      payNowButton.classList.remove("disabled");
      payNowButton.style.pointerEvents = "auto";
    } else {
      payNowButton.classList.add("disabled");
      payNowButton.style.pointerEvents = "none"; 
    }
  }

  checkbox1.addEventListener("change", updatePayNowButton);
  checkbox2.addEventListener("change", updatePayNowButton);

  
  updatePayNowButton();
});


function validateAgreement() {
  const checkbox1 = document.getElementById("agree-terms");
  const checkbox2 = document.getElementById("agree-contact");
  if (!checkbox1.checked || !checkbox2.checked) {
    alert("Please agree to the rental terms and privacy policy and acknowledge contact coordination.");
    return false;
  }
  return true; 
}
</script>

<script>
document.addEventListener("DOMContentLoaded", function() {
try {
const selectedCar = JSON.parse(localStorage.getItem("selectedCar"));
if (selectedCar) {

const carDetailsHTML = `
<div class="car-details">
<img src="${selectedCar.image}" alt="${selectedCar.model}"
class="summary-car-image">
<div class="car-info">
<h3>${selectedCar.model}</h3>
<p><strong>Type:</strong> ${selectedCar.type}</p>
<p><strong>Seats:</strong> ${selectedCar.seats}</p>
<p><strong>Fuel:</strong> ${selectedCar.fuel}</p>
<p><strong>Daily Rate:</strong>
₱${selectedCar.rate.toLocaleString()}/day</p>
</div>
</div>
`;
const summaryDiv = document.getElementById("booking-summary");

summaryDiv.innerHTML = carDetailsHTML + `
<h2>Booking Summary</h2>
<p><strong>Rental Duration:</strong> <span
id="summary-rentalDuration"></span></p>
<p><strong>Branch:</strong> <span id="summary-branch"></span></p>
<p><strong>Delivery Location:</strong> <span
id="summary-delivery"></span></p>
<p><strong>Return Location:</strong> <span
id="summary-return"></span></p>
<p><strong>Start Date:</strong> <span
id="summary-startDate"></span></p>

<p><strong>End Date:</strong> <span
id="summary-endDate"></span></p>
${summaryDiv.innerHTML.split('</div>').slice(-2).join('</div>')}`;
} else {
console.log("No car selected");
}
} catch (error) {
console.error("Error displaying car details:", error);
}
});
</script>
</body>
</html>
